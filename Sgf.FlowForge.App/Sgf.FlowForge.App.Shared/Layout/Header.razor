@using Sgf.FlowForge.App.Shared.Services
@* Components/Layout/Header.razor *@
@inject LocalizationService L
@inject NavigationManager Navigation

<header class="sticky top-0 z-40 bg-gradient-to-r from-[var(--color-primary-500)] via-[var(--color-primary-600)] to-[var(--color-secondary-600)] shadow-md">
    <div class="container mx-auto px-4">
        <div class="flex items-center justify-between h-12">

            <!-- 左侧：Logo + 汉堡菜单 -->
            <div class="flex items-center gap-3">
                <!-- 汉堡菜单按钮（移动端） -->
                <button type="button"
                        class="md:hidden flex items-center justify-center w-8 h-8 rounded-md
                               text-white/80 hover:text-white hover:bg-white/10
                               transition-all duration-200"
                        @onclick="OnMenuToggle">
                    <i class="fas fa-bars text-sm"></i>
                </button>

                <!-- Logo -->
                <a href="/" class="flex items-center gap-2 group">
                    <div class="flex items-center justify-center w-8 h-8 rounded-lg
                                bg-white/20 backdrop-blur-sm
                                group-hover:bg-white/30 transition-all duration-200">
                        <i class="fas fa-project-diagram text-white text-sm"></i>
                    </div>
                    <div class="flex flex-col">
                        <span class="text-sm font-bold text-white leading-none">FlowForge</span>
                        <span class="text-[0.625rem] text-white/70 leading-none">BPMN Platform</span>
                    </div>
                </a>
            </div>

            <!-- 中间：桌面端导航菜单 -->
            <nav class="hidden md:flex items-center gap-1">
                <NavLink href="/designer" class="nav-link">
                    <i class="fas fa-drafting-compass"></i>
                    <span>@L["nav.designer"]</span>
                </NavLink>
                <NavLink href="/codegen" class="nav-link">
                    <i class="fas fa-code"></i>
                    <span>@L["nav.codeGen"]</span>
                </NavLink>
                <NavLink href="/editor" class="nav-link">
                    <i class="fas fa-edit"></i>
                    <span>@L["nav.editor"]</span>
                </NavLink>
                <NavLink href="/build" class="nav-link">
                    <i class="fas fa-hammer"></i>
                    <span>@L["nav.build"]</span>
                </NavLink>
                <NavLink href="/deploy" class="nav-link">
                    <i class="fas fa-rocket"></i>
                    <span>@L["nav.deploy"]</span>
                </NavLink>
            </nav>

            <!-- 右侧：工具栏 -->
            <div class="flex items-center gap-2">
                <!-- 搜索按钮 -->
                <button type="button"
                        class="hidden sm:flex items-center justify-center w-8 h-8 rounded-md
                               text-white/80 hover:text-white hover:bg-white/10
                               transition-all duration-200"
                        title="@L["common.search"]">
                    <i class="fas fa-search text-xs"></i>
                </button>

                <!-- 通知按钮 -->
                <button type="button"
                        class="hidden sm:flex items-center justify-center w-8 h-8 rounded-md
                               text-white/80 hover:text-white hover:bg-white/10
                               transition-all duration-200 relative"
                        title="@L["nav.notifications"]">
                    <i class="fas fa-bell text-xs"></i>
                    <span class="absolute top-1 right-1 w-2 h-2 bg-[var(--color-error-500)] rounded-full border border-white"></span>
                </button>

                <!-- 主题切换器 -->
                <ThemeSwitcher />

                <!-- 语言切换器 -->
                <LanguageSwitcher />

                <!-- 用户菜单 -->
                <UserMenu />
            </div>
        </div>
    </div>
</header>

<style>
    .nav-link {
        display: flex;
        align-items: center;
        gap: 0.375rem;
        padding: 0.375rem 0.625rem;
        border-radius: 0.375rem;
        font-size: 0.75rem;
        font-weight: 500;
        color: rgba(255, 255, 255, 0.8);
        transition: all 0.2s ease;
        white-space: nowrap;
    }

        .nav-link:hover {
            color: white;
            background: rgba(255, 255, 255, 0.1);
        }

        .nav-link.active {
            color: white;
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.3);
        }

        .nav-link i {
            font-size: 0.6875rem;
        }
</style>

@code {
    [Parameter] public EventCallback OnMenuToggle { get; set; }
}